@model List<PhoneShop.ModelViews.ProductViewModel>
@using PhoneShop.Extension;
@{
    ViewData["Title"] = "ProductByCategory";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{

   

    int tienO = 0;
}

<style>
    .star-container {
        font-size: 24px;
    }

    .filled {
        color: gold;
    }

    .half-filled {
        color: gold;
    }


    .star-container .fa-star-o {
        color: lightgray;
    }

    .product-section-title {
        text-align: center;
        margin-bottom: 10px;
    }
</style>

<div class="container">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item" style="font-size: 18px;"><a href="~/">Trang chủ</a></li>
            <li class="breadcrumb-item active" style="font-size: 18px;" aria-current="page">@ViewBag.GetAliasCategory</li>
        </ol>
    </nav>

</div>

<div class="single-product-area" style="padding-top:30px">
    <div class="zigzag-bottom"></div>
    <div class="container">
        <div class="row">


            @foreach(var item in Model)
            {
                <div class="col-md-3 col-sm-6">
                    <div class="single-product">
                        <div class="product-f-image" style="display: flex; justify-content: center; align-items: center;">
                            <img src="~/images/Product/@item.ImageDefaultName" style="height:296px; width:220px" />

                            <div class="product-hover">
                                <a class="add-to-cart-link confirmAdd" data-id="@item.Id"><i class="fa fa-shopping-cart"></i> Thêm vào giỏ</a>
                                <a href="/chi-tiet/@item.Alias-@item.Id" class="view-details-link"><i class="fa fa-link"></i> Xem chi tiết</a>
                            </div>
                        </div>

                        <div style="height:45px">
                            <h2><a style="height:45px" href="/chi-tiet/@item.Alias-@item.Id">@item.Title </a></h2>
                        </div>
                        <div id="stars-container">
                            @for (int i = 1; i <= 5; i++)
                            {
                                if (i <= Math.Floor(item.Rating))
                                {
                                    <i class="fa fa-star filled"></i> <!-- Sao đầy -->
                                }
                                else if (i == Math.Ceiling(item.Rating))
                                {
                                    <i class="fa fa-star-half-o half-filled"></i> <!-- Sao nửa -->
                                }
                                else
                                {
                                    <i class="fa fa-star-o"></i> <!-- Sao rỗng -->
                                }
                            }
                        </div>
                        <div class="product-carousel-price" style="color:red">Đã bán: @item.Quantity_Purchase</div>
                        <div class="product-carousel-price">


                            @{
                                if (item.Discount == 0 || item.Discount == null || item.Discount is string)
                                {
                                    <ins>
                                        @{






                                            string formattedPrice = PhoneShop.Extension.Extension.ToVnd((double)item.Price);

                                        }
                                        @formattedPrice
                                    </ins>
                                }
                                else
                                {
                                    <ins>
                                        @{





                                            string formattedPrice = PhoneShop.Extension.Extension.ToVnd((double)item.Discount);


                                        }
                                        @formattedPrice
                                    </ins>
                                }
                            }

                            @{
                                string formattedPrice2;
                                if (item.Discount > 0)
                                {


                                    formattedPrice2 = PhoneShop.Extension.Extension.ToVnd((double)item.Price);
                                    <del>@formattedPrice2</del>
                                }



                            }






                        </div>


                    </div>
                </div>

            }


           

        
    </div>
</div>
</div>
